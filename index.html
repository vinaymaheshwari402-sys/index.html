<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garuda | Master Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; overflow-x: hidden; }
        .hero-gradient { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
        .gold-text { color: #c5a059; }
        .gold-bg { background-color: #c5a059; }
        /* These stay hidden until JS triggers them */
        #dashboard-view, #support-modal, #logs-modal, #auth-modal { display: none; }
    </style>
</head>
<body>

    <nav class="bg-white/90 backdrop-blur-xl fixed w-full z-[100] border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex items-center gap-3 cursor-pointer" onclick="location.reload()">
                    <div class="w-10 h-10 gold-bg rounded-lg flex items-center justify-center shadow-lg">
                        <i class="fas fa-paper-plane text-white"></i>
                    </div>
                    <span class="text-2xl font-black tracking-tighter text-slate-900 uppercase">Garuda</span>
                </div>

                <div class="hidden md:flex space-x-8 text-sm font-bold text-slate-600">
                    <a href="#" class="hover:text-blue-600">Home</a>
                    <button onclick="openSupport()" class="hover:text-blue-600 transition">Support</button>
                    <button onclick="openLogs()" class="text-amber-600 hover:text-amber-700">System Logs</button>
                </div>

                <div class="flex space-x-4">
                    <button onclick="showAuth('login')" class="px-5 py-2 text-sm font-bold text-slate-700">Login</button>
                    <button onclick="showAuth('register')" class="px-6 py-2 text-sm font-bold text-white bg-slate-900 rounded-full shadow-lg hover:bg-slate-800 transition">Join Now</button>
                </div>
            </div>
        </div>
    </nav>

    <div id="landing-view">
        <section class="hero-gradient pt-52 pb-32 px-4 text-center">
            <div class="max-w-4xl mx-auto">
                <h1 class="text-6xl md:text-8xl font-black text-white mb-6 tracking-tight">
                    Fly Higher with <br><span class="gold-text">Smart Capital</span>
                </h1>
                <p class="text-slate-400 text-xl mb-12">Institutional wealth management and secure settlements.</p>
                <button onclick="showAuth('register')" class="gold-bg text-white px-10 py-5 rounded-2xl font-bold hover:scale-105 transition shadow-2xl text-lg">
                    Start Your Journey
                </button>
            </div>
        </section>
    </div>

    <div id="dashboard-view" class="min-h-screen pt-32 bg-slate-50 px-4">
        <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="md:col-span-1">
                    <div class="bg-slate-900 p-8 rounded-[2rem] text-white shadow-2xl">
                        <p class="text-[10px] font-bold text-amber-500 uppercase tracking-widest mb-2">Welcome Back,</p>
                        <h4 id="displayUser" class="text-2xl font-bold">Client</h4>
                        <button onclick="location.reload()" class="mt-6 text-xs text-slate-400 hover:text-white transition underline">Sign Out</button>
                    </div>
                </div>
                <div class="md:col-span-3 space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-8 rounded-[2rem] border shadow-sm">
                            <p class="text-xs font-bold text-slate-400 uppercase">Global Balance</p>
                            <h2 id="totalBalance" class="text-5xl font-black text-slate-900 mt-2">$0.00</h2>
                        </div>
                        <div class="bg-white p-8 rounded-[2rem] border flex justify-around items-center shadow-sm">
                            <button onclick="handleTransaction('deposit')" class="flex flex-col items-center">
                                <div class="w-14 h-14 bg-emerald-500 text-white rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition"><i class="fas fa-plus"></i></div>
                                <span class="text-xs font-bold mt-2 uppercase">Deposit</span>
                            </button>
                            <button onclick="handleTransaction('withdraw')" class="flex flex-col items-center">
                                <div class="w-14 h-14 bg-rose-500 text-white rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition"><i class="fas fa-minus"></i></div>
                                <span class="text-xs font-bold mt-2 uppercase">Withdraw</span>
                            </button>
                        </div>
                    </div>
                    <div class="bg-white rounded-[2rem] border shadow-sm overflow-hidden">
                        <div class="p-6 border-b flex justify-between items-center bg-slate-50/50">
                            <h3 class="font-bold text-slate-800">Managed Client Portfolios</h3>
                            <button onclick="openNewClient()" class="gold-bg text-white text-xs font-bold px-4 py-2 rounded-xl">Add New Portfolio</button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="text-[10px] text-slate-400 font-bold uppercase border-b">
                                    <tr><th class="p-6">Client Name</th><th class="p-6 text-center">Initial Tier</th><th class="p-6 text-right">Settled Balance</th></tr>
                                </thead>
                                <tbody id="clientTableBody" class="divide-y divide-slate-100"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="support-modal" class="fixed inset-0 bg-slate-900/90 z-[200] items-center justify-center p-4">
        <div class="bg-white rounded-[2.5rem] p-10 w-full max-w-md relative shadow-2xl">
            <button onclick="closeSupport()" class="absolute top-8 right-8 text-slate-300 hover:text-slate-900"><i class="fas fa-times text-2xl"></i></button>
            <h2 class="text-3xl font-black mb-2 text-slate-900">Support</h2>
            <form onsubmit="sendSupport(event)">
                <input type="text" id="sName" placeholder="Full Name" required class="w-full p-4 bg-slate-50 rounded-2xl mb-4 border border-slate-100 outline-none focus:border-amber-500">
                <input type="email" id="sEmail" placeholder="Email" required class="w-full p-4 bg-slate-50 rounded-2xl mb-4 border border-slate-100 outline-none">
                <textarea id="sMessage" placeholder="How can we help?" required rows="4" class="w-full p-4 bg-slate-50 rounded-2xl mb-6 border border-slate-100 outline-none"></textarea>
                <button type="submit" class="w-full py-5 gold-bg text-white font-bold rounded-2xl shadow-xl uppercase tracking-widest">Submit Inquiry</button>
            </form>
        </div>
    </div>

    <div id="logs-modal" class="fixed inset-0 bg-slate-900/95 z-[300] items-center justify-center p-4">
        <div class="bg-white rounded-[3rem] p-12 w-full max-w-6xl relative max-h-[85vh] overflow-y-auto">
            <button onclick="closeLogs()" class="absolute top-10 right-10 text-slate-300 hover:text-slate-900"><i class="fas fa-times text-3xl"></i></button>
            <h2 class="text-4xl font-black mb-10 text-slate-900">System Registry</h2>
            <div class="grid grid-cols-1 gap-12">
                <div>
                    <h3 class="text-xs font-black text-amber-600 uppercase mb-4 tracking-widest">Support Tickets</h3>
                    <table class="w-full text-left text-sm border">
                        <thead class="bg-slate-50"><tr><th class="p-4">Date</th><th class="p-4">Name</th><th class="p-4">Email</th><th class="p-4">Message</th></tr></thead>
                        <tbody id="logs-table-body"></tbody>
                    </table>
                </div>
                <div>
                    <h3 class="text-xs font-black text-blue-600 uppercase mb-4 tracking-widest">User Database</h3>
                    <table class="w-full text-left text-sm border">
                        <thead class="bg-slate-50"><tr><th class="p-4">User</th><th class="p-4">Phone</th><th class="p-4">Status</th></tr></thead>
                        <tbody id="registry-table-body"></tbody>
                    </table>
                </div>
            </div>
            <button onclick="clearAllData()" class="mt-8 text-rose-500 font-bold text-xs uppercase hover:underline">Wipe All Records</button>
        </div>
    </div>

    <div id="auth-modal" class="fixed inset-0 bg-slate-900/95 z-[400] items-center justify-center p-4">
        <div class="bg-white rounded-[2.5rem] p-12 w-full max-w-md relative shadow-2xl">
            <button onclick="closeAuth()" class="absolute top-8 right-8 text-slate-300 hover:text-slate-900"><i class="fas fa-times text-2xl"></i></button>
            <div id="auth-content"></div>
        </div>
    </div>

    <script>
        // --- CORE DATA ---
        let clients = JSON.parse(localStorage.getItem('garuda_clients')) || [];
        let generatedOTP = null;

        // --- MODAL CONTROLS (FIXED) ---
        function openSupport() { document.getElementById('support-modal').style.display = 'flex'; }
        function closeSupport() { document.getElementById('support-modal').style.display = 'none'; }
        function openLogs() { document.getElementById('logs-modal').style.display = 'flex'; renderLogsTable(); }
        function closeLogs() { document.getElementById('logs-modal').style.display = 'none'; }
        function closeAuth() { document.getElementById('auth-modal').style.display = 'none'; }

        // --- AUTH SYSTEM ---
        function showAuth(type) {
            document.getElementById('auth-modal').style.display = 'flex';
            const content = document.getElementById('auth-content');
            if(type === 'login') {
                content.innerHTML = `<h2 class="text-3xl font-black mb-2">Login</h2><p class="text-slate-400 mb-6">Secure Portal Access</p>
                <input type="tel" id="lPhone" placeholder="Mobile" class="w-full p-4 bg-slate-50 rounded-2xl mb-4 border"><input type="password" id="lPass" placeholder="Password" class="w-full p-4 bg-slate-50 rounded-2xl mb-4 border">
                <div id="otp-box" class="hidden"><input type="text" id="lOtp" placeholder="OTP" class="w-full p-4 bg-amber-50 border-2 border-amber-200 rounded-2xl mb-6 text-center text-xl font-bold"></div>
                <button id="auth-btn" onclick="sendOTP('login')" class="w-full py-4 bg-slate-900 text-white font-bold rounded-2xl">Get Code</button>`;
            } else {
                content.innerHTML = `<h2 class="text-3xl font-black mb-2">Register</h2><p class="text-slate-400 mb-6">New Institutional Account</p>
                <input type="text" id="rUser" placeholder="Full Name" class="w-full p-4 bg-slate-50 rounded-2xl mb-4 border"><input type="tel" id="rPhone" placeholder="Mobile" class="w-full p-4 bg-slate-50 rounded-2xl mb-4 border"><input type="password" id="rPass" placeholder="Password" class="w-full p-4 bg-slate-50 rounded-2xl mb-4 border">
                <div id="otp-box-reg" class="hidden"><input type="text" id="rOtp" placeholder="OTP" class="w-full p-4 bg-amber-50 border-2 border-amber-200 rounded-2xl mb-6 text-center text-xl font-bold"></div>
                <button id="reg-btn" onclick="sendOTP('register')" class="w-full py-4 gold-bg text-white font-bold rounded-2xl">Verify Phone</button>`;
            }
        }

        function sendOTP(mode) {
            generatedOTP = Math.floor(100000 + Math.random() * 900000).toString();
            alert("GARUDA SECURE CODE: " + generatedOTP);
            if(mode === 'login') {
                document.getElementById('otp-box').classList.remove('hidden');
                document.getElementById('auth-btn').onclick = login;
            } else {
                document.getElementById('otp-box-reg').classList.remove('hidden');
                document.getElementById('reg-btn').onclick = register;
            }
        }

        function register() {
            const u = document.getElementById('rUser').value, ph = document.getElementById('rPhone').value, p = document.getElementById('rPass').value, otp = document.getElementById('rOtp').value;
            if(otp !== generatedOTP) return alert("Wrong Code");
            localStorage.setItem(`garuda_ph_${ph}`, JSON.stringify({name: u, pass: p}));
            alert("Success! Please login.");
            showAuth('login');
        }

        function login() {
            const ph = document.getElementById('lPhone').value, p = document.getElementById('lPass').value, otp = document.getElementById('lOtp').value;
            const data = JSON.parse(localStorage.getItem(`garuda_ph_${ph}`));
            if(data && data.pass === p && otp === generatedOTP) {
                document.getElementById('landing-view').style.display = 'none';
                document.getElementById('dashboard-view').style.display = 'block';
                document.getElementById('displayUser').innerText = data.name;
                closeAuth();
                render();
            } else { alert("Invalid Credentials"); }
        }

        // --- DASHBOARD ACTIONS ---
        function openNewClient() {
            const name = prompt("Client Name:"), tier = prompt("Initial Tier (500, 1000, 1500, 2000):");
            if(name && [500, 1000, 1500, 2000].includes(parseInt(tier))) {
                clients.push({id: Date.now(), name, balance: parseInt(tier), tier});
                localStorage.setItem('garuda_clients', JSON.stringify(clients));
                render();
            } else { alert("Please enter a valid tier amount."); }
        }

        function handleTransaction(type) {
            if(!clients.length) return alert("Please add a client first.");
            const amt = parseFloat(prompt(`Enter ${type} amount:`));
            if(!isNaN(amt)) {
                clients[0].balance += (type === 'deposit' ? amt : -amt);
                localStorage.setItem('garuda_clients', JSON.stringify(clients));
                render();
            }
        }

        function render() {
            const b = document.getElementById('clientTableBody');
            let total = 0; b.innerHTML = '';
            clients.forEach(c => {
                total += c.balance;
                b.innerHTML += `<tr><td class="p-6 font-bold">${c.name}</td><td class="p-6 text-center text-slate-500 font-bold">$${c.tier}</td><td class="p-6 text-right font-black text-blue-600">$${c.balance.toLocaleString()}</td></tr>`;
            });
            document.getElementById('totalBalance').innerText = `$${total.toLocaleString()}`;
        }

        // --- LOGS & SUPPORT ---
        function sendSupport(e) {
            e.preventDefault();
            const ticket = { name: document.getElementById('sName').value, email: document.getElementById('sEmail').value, message: document.getElementById('sMessage').value, date: new Date().toLocaleString() };
            let logs = JSON.parse(localStorage.getItem('garuda_support_logs')) || [];
            logs.push(ticket);
            localStorage.setItem('garuda_support_logs', JSON.stringify(logs));
            alert("Support ticket saved.");
            closeSupport();
        }

        function renderLogsTable() {
            const tBody = document.getElementById('logs-table-body'), rBody = document.getElementById('registry-table-body');
            const logs = JSON.parse(localStorage.getItem('garuda_support_logs')) || [];
            tBody.innerHTML = logs.length ? '' : '<tr><td colspan="4" class="p-4 text-slate-400">Empty</td></tr>';
            logs.forEach(l => { tBody.innerHTML += `<tr class="border-b"><td class="p-4 font-mono text-[10px]">${l.date}</td><td class="p-4 font-bold">${l.name}</td><td class="p-4 text-blue-600">${l.email}</td><td class="p-4">${l.message}</td></tr>`; });
            rBody.innerHTML = '';
            for(let i=0; i<localStorage.length; i++){
                let key = localStorage.key(i);
                if(key.startsWith('garuda_ph_')){
                    let d = JSON.parse(localStorage.getItem(key));
                    rBody.innerHTML += `<tr class="border-b"><td class="p-4 font-bold">${d.name}</td><td class="p-4 text-slate-500 font-mono">${key.split('_')[2]}</td><td class="p-4"><span class="bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-[10px] font-bold">Verified</span></td></tr>`;
                }
            }
        }

        function clearAllData() { if(confirm("Wipe everything?")) { localStorage.clear(); location.reload(); } }
    </script>
</body>
</html>
